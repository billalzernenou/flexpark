<ion-header>
  <ion-toolbar>
    <ion-title>Connexion</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="auth-root">
    <!-- Bannière de bienvenue -->
    <div class="auth-banner">
      <div class="banner-content">
        <h1>FlexPark</h1>
        <p class="subtitle">Gestion intelligente de parking</p>
      </div>
    </div>

    <!-- Formulaire de connexion -->
    <div class="auth-container">
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <!-- Section Email -->
        <div class="form-section">
          <label class="form-label">Email</label>
          <div class="input-wrapper">
            <ion-icon name="mail-outline" class="input-icon"></ion-icon>
            <ion-input
              type="email"
              formControlName="email"
              placeholder="votre@email.com"
              class="custom-input"
            >
            </ion-input>
          </div>
          <div *ngIf="submitted && f['email'].errors" class="error-message">
            <small *ngIf="f['email'].errors['required']"
              >L'email est requis</small
            >
            <small *ngIf="f['email'].errors['email']">Email invalide</small>
          </div>
        </div>

        <!-- Section Mot de passe -->
        <div class="form-section">
          <label class="form-label">Mot de passe</label>
          <div class="input-wrapper">
            <ion-icon name="lock-closed-outline" class="input-icon"></ion-icon>
            <ion-input
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              placeholder="Votre mot de passe"
              class="custom-input"
            >
            </ion-input>
            <ion-icon
              [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
              slot="end"
              (click)="togglePasswordVisibility()"
              class="password-toggle"
            >
            </ion-icon>
          </div>
          <div *ngIf="submitted && f['password'].errors" class="error-message">
            <small *ngIf="f['password'].errors['required']"
              >Le mot de passe est requis</small
            >
            <small *ngIf="f['password'].errors['minlength']"
              >Minimum 6 caractères</small
            >
          </div>
        </div>

        <!-- Bouton de connexion -->
        <ion-button
          expand="full"
          type="submit"
          [disabled]="isLoading"
          class="submit-button"
        >
          <ion-icon name="log-in-outline" slot="start"></ion-icon>
          {{ isLoading ? 'Connexion en cours...' : 'Se connecter' }}
        </ion-button>
      </form>

      <!-- Lien vers inscription -->
      <div class="auth-footer">
        <p>
          Pas encore de compte?
          <span class="link" (click)="navigateToRegister()">S'inscrire</span>
        </p>
      </div>
    </div>
  </div>
</ion-content>
